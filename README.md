# BridgeTalk ğŸŒ‰

èŒèƒ½æ²Ÿé€šç¿»è¯‘åŠ©æ‰‹ - å¸®åŠ©äº§å“ç»ç†å’Œå¼€å‘å·¥ç¨‹å¸ˆæ›´å¥½åœ°ç†è§£å½¼æ­¤ã€‚

## åŠŸèƒ½ç‰¹æ€§

- **è‡ªåŠ¨è¯†åˆ«è§†è§’**ï¼šæ™ºèƒ½åˆ¤æ–­è¾“å…¥æ˜¯äº§å“è§†è§’è¿˜æ˜¯å¼€å‘è§†è§’
- **æ™ºèƒ½ç¿»è¯‘**ï¼šæ ¹æ®è¯†åˆ«ç»“æœè‡ªåŠ¨é€‰æ‹©ç¿»è¯‘æ–¹å‘
- **ç¼ºå¤±åˆ†æ**ï¼šä¸»åŠ¨è¯†åˆ«å¹¶è¡¥å……ç¼ºå¤±çš„å…³é”®ä¿¡æ¯
- **æµå¼è¾“å‡º**ï¼šSSE å®æ—¶æ˜¾ç¤ºç¿»è¯‘ç»“æœ
- **å†å²è®°å½•**ï¼šä¿å­˜ç¿»è¯‘å†å²åˆ°æ•°æ®åº“

## æŠ€æœ¯æ ˆ

### åç«¯
- Python 3.13
- FastAPI
- LangChain + é€šä¹‰åƒé—® (DashScope)
- PostgreSQL + SQLAlchemy + Alembic
- LangGraph
- Redis
- SSE (sse-starlette)

### å‰ç«¯
- React 19 + TypeScript
- Tailwind CSS 4
- Vite 6

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.13+
- Node.js 20+
- PostgreSQL 15+
- Redis 6+
- pnpm (æ¨è)

### åç«¯å¯åŠ¨

```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆä»“åº“æ ¹ç›®å½•ï¼‰
source .venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -e apps/backend

# è¿›å…¥åç«¯ç›®å½•
cd apps/backend

# é…ç½®ç¯å¢ƒå˜é‡
export DASHSCOPE_API_KEY=your_api_key

# åˆ›å»ºæ•°æ®åº“
createdb bridgetalk

# è¿è¡Œè¿ç§»
alembic upgrade head

# å¯åŠ¨æœåŠ¡
python -m uvicorn src.main:app --reload
```

åç«¯æœåŠ¡è¿è¡Œåœ¨ http://localhost:8000

### å‰ç«¯å¯åŠ¨

```bash
# å®‰è£…ä¾èµ–ï¼ˆä»“åº“æ ¹ç›®å½•ï¼‰
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm --filter @bridgetalk/frontend dev
```

å‰ç«¯æœåŠ¡è¿è¡Œåœ¨ http://localhost:5173

## API æ–‡æ¡£

### POST /api/translate/stream

æµå¼ç¿»è¯‘æ¥å£ã€‚

**è¯·æ±‚ä½“ï¼š**
```json
{
  "content": "éœ€è¦ä¸€ä¸ªæ™ºèƒ½æ¨èåŠŸèƒ½ï¼Œæå‡ç”¨æˆ·åœç•™æ—¶é•¿",
  "context": "å¯é€‰çš„è¡¥å……ä¸Šä¸‹æ–‡"
}
```

**SSE äº‹ä»¶ï¼š**
- `perspective_detected`ï¼šè§†è§’è¯†åˆ«ç»“æœ
- `gaps_identified`ï¼šç¼ºå¤±ä¿¡æ¯åˆ†æ
- `translation_start`ï¼šå¼€å§‹ç¿»è¯‘
- `content_delta`ï¼šç¿»è¯‘å†…å®¹å¢é‡
- `message_done`ï¼šç¿»è¯‘å®Œæˆ

### GET /api/translate/history

è·å–ç¿»è¯‘å†å²åˆ—è¡¨ã€‚

**æŸ¥è¯¢å‚æ•°ï¼š**
- `page`ï¼šé¡µç ï¼ˆé»˜è®¤ 1ï¼‰
- `size`ï¼šæ¯é¡µæ•°é‡ï¼ˆé»˜è®¤ 20ï¼‰

## é¡¹ç›®ç»“æ„

```
bridgetalk/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ backend/
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ main.py              # åº”ç”¨å…¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py            # é…ç½®ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ container.py         # ä¾èµ–æ³¨å…¥
â”‚   â”‚   â”‚   â”œâ”€â”€ model_registry.py    # æ¨¡å‹æ³¨å†Œè¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ core/                # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ api/             # API å“åº”
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ cache/           # Redis ç¼“å­˜
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ config/          # é…ç½®åŠ è½½å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ context/         # è¯·æ±‚ä¸Šä¸‹æ–‡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ database/        # æ•°æ®åº“
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ logging/         # æ—¥å¿—é…ç½®
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sse/             # SSE äº‹ä»¶
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ type/            # ç±»å‹å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ domain/translate/    # ç¿»è¯‘åŸŸ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ agent/           # LangGraph Agent
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ api/             # API è·¯ç”±
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ graph/           # LangGraph æ£€æŸ¥ç‚¹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ model/           # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ prompts/         # æç¤ºè¯
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ repository/      # ä»“å‚¨å±‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ schema/          # è¯·æ±‚/å“åº”æ¨¡å‹
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ service/         # æœåŠ¡å±‚
â”‚   â”‚   â”‚   â””â”€â”€ llm/                 # LLM é€‚é…
â”‚   â”‚   â”œâ”€â”€ alembic/                 # æ•°æ®åº“è¿ç§»
â”‚   â”‚   â”œâ”€â”€ config.yaml              # é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ pyproject.toml           # Python ä¾èµ–
â”‚   â””â”€â”€ frontend/
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ App.tsx              # æ ¹ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ api/                 # API ç±»å‹
â”‚       â”‚   â”œâ”€â”€ components/          # ç»„ä»¶
â”‚       â”‚   â”‚   â”œâ”€â”€ layout/          # å¸ƒå±€ç»„ä»¶
â”‚       â”‚   â”‚   â”œâ”€â”€ translate/       # ç¿»è¯‘ç»„ä»¶
â”‚       â”‚   â”‚   â””â”€â”€ ui/              # UI ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ config/              # é…ç½®
â”‚       â”‚   â”œâ”€â”€ hooks/               # è‡ªå®šä¹‰ Hook
â”‚       â”‚   â”œâ”€â”€ pages/               # é¡µé¢ç»„ä»¶
â”‚       â”‚   â””â”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ index.html
â”‚       â”œâ”€â”€ package.json
â”‚       â””â”€â”€ vite.config.ts
â”œâ”€â”€ docs/                            # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ .claude/                         # Claude Code é…ç½®
    â”œâ”€â”€ rules/                       # è§„åˆ™å®šä¹‰
    â”œâ”€â”€ commands/                    # å‘½ä»¤å®šä¹‰
    â””â”€â”€ skills/                      # æŠ€èƒ½å®šä¹‰
```

## Claude Code è§„åˆ™ç´¢å¼•

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `.claude/rules/principles.md` | æ ¸å¿ƒä¸å¯å˜åŸåˆ™ |
| `.claude/rules/workflow.md` | ä»»åŠ¡æ‰§è¡Œæµç¨‹ |
| `.claude/rules/quality.md` | è´¨é‡ä¸æ€§èƒ½æ ‡å‡† |
| `.claude/rules/tools.md` | å·¥å…·ä½¿ç”¨æŒ‡å— |
| `.claude/rules/safety.md` | é«˜é£é™©æ“ä½œç¡®è®¤ |
| `.claude/rules/backend/python.md` | Python åç«¯è§„èŒƒ |
| `.claude/rules/frontend/react.md` | React å‰ç«¯è§„èŒƒ |

## åç«¯æ–‡æ¡£

- `docs/backend/architecture.md`ï¼šåç«¯æ¶æ„
- `docs/backend/dependency-injection.md`ï¼šä¾èµ–æ³¨å…¥
- `docs/backend/session-signatures.md`ï¼šSession ç®¡ç†

## æ™ºèƒ½ Agent å·¥ä½œæµç¨‹

```
ç”¨æˆ·è¾“å…¥
    â†“
1. è¯†åˆ«è§†è§’ (identify_perspective)
   â†’ åˆ¤æ–­æ˜¯äº§å“è§†è§’è¿˜æ˜¯å¼€å‘è§†è§’
    â†“
2. åˆ†æç¼ºå¤± (analyze_gaps)
   â†’ è¯†åˆ«éœ€è¦è¡¥å……çš„å…³é”®ä¿¡æ¯
    â†“
3. æ‰§è¡Œç¿»è¯‘ (translate)
   â†’ æ ¹æ®ç›®æ ‡å—ä¼—ç¿»è¯‘å†…å®¹
    â†“
ç¿»è¯‘ç»“æœ + è¡¥å……å»ºè®®
```

## è®¸å¯è¯

MIT
